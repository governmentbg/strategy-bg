#pragma checksum "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "11f39aecf9cb9b38673be3df475ff7f16c1f0231"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_Admin_Views_Shared_UsedDocuments), @"mvc.1.0.view", @"/Areas/Admin/Views/Shared/UsedDocuments.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/Admin/Views/Shared/UsedDocuments.cshtml", typeof(AspNetCore.Areas_Admin_Views_Shared_UsedDocuments))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#line 2 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Domain;

#line default
#line hidden
#line 3 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Models.ViewModels;

#line default
#line hidden
#line 4 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Models.ViewModels.Account;

#line default
#line hidden
#line 5 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Models.Context.Account;

#line default
#line hidden
#line 6 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using WebCommon.TagHelpers;

#line default
#line hidden
#line 7 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Models;

#line default
#line hidden
#line 8 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\_ViewImports.cshtml"
using Models.Context;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"11f39aecf9cb9b38673be3df475ff7f16c1f0231", @"/Areas/Admin/Views/Shared/UsedDocuments.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"ec689d54487eca61e3f158b7f8d73212d01bdb46", @"/Areas/Admin/Views/_ViewImports.cshtml")]
    public class Areas_Admin_Views_Shared_UsedDocuments : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<FileCDN.Models.FileSelect>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 2 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
  
    var addControls = new[] { GlobalConstants.SourceTypes.StrategicDocuments }.Contains(Model.SourceType.Value);

#line default
#line hidden
            BeginContext(155, 241, true);
            WriteLiteral("<fieldset>\r\n    <div id=\"fileList-container\">\r\n\r\n    </div>\r\n</fieldset>\r\n<div id=\"renameDialog\" style=\"display:none;\">\r\n    <label>Наименование на файла</label>\r\n    <br />\r\n    <input type=\"text\" id=\"fileNameEdit\" class=\"form-control\" />\r\n");
            EndContext();
#line 14 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
     if (addControls)
    {
    }

#line default
#line hidden
            BeginContext(433, 594, true);
            WriteLiteral(@"    <input type=""hidden"" id=""fileIdHidden"" />
</div>
<script>
    var renameFileDialog = null;
    $(function () {
        LoadAttachedFiles();


        renameFileDialog = $(""#renameDialog"").dialog({
            autoOpen: false,
            height: 200,
            width: 750,
            modal: true,
            buttons: {
                ""Преименувай"": renameFileSubmit,
                ""Отказ"": function () {
                    renameFileDialog.dialog(""close"");
                }
            }
        });
    });
    function LoadAttachedFiles() {
        $.post('");
            EndContext();
            BeginContext(1028, 33, false);
#line 39 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
           Write(Url.Action("GetFileList", "Ajax"));

#line default
#line hidden
            EndContext();
            BeginContext(1061, 29, true);
            WriteLiteral("\',\r\n            { sourceType:");
            EndContext();
            BeginContext(1092, 16, false);
#line 40 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                     Write(Model.SourceType);

#line default
#line hidden
            EndContext();
            BeginContext(1109, 11, true);
            WriteLiteral(", sourceId:");
            EndContext();
            BeginContext(1122, 14, false);
#line 40 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                                                   Write(Model.SourceID);

#line default
#line hidden
            EndContext();
            BeginContext(1137, 91, true);
            WriteLiteral("},\r\n            function (data) {\r\n                var canAdd = true;\r\n                if (");
            EndContext();
            BeginContext(1230, 35, false);
#line 43 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                Write(Model.SingleFile ? "true" : "false");

#line default
#line hidden
            EndContext();
            BeginContext(1266, 374, true);
            WriteLiteral(@" && data.length > 0) {
                    canAdd = false;
                }
                var model = {
                    items : data,
                    canAdd: canAdd
                };
                $('#fileList-container').html(TemplateToHtml(""#fileListTemplate"", model));
            });
    }

    function chooseFile() {
        var uploadUrl = """);
            EndContext();
            BeginContext(1641, 192, false);
#line 55 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                    Write(Html.Raw(Url.Action("UploadFile","FileCdn",new { sourceType = GlobalConstants.SourceTypes.Library_Documents, sourceId = 0, directUploadMethod = "libSelectDocument", stUsed=Model.SourceType })));

#line default
#line hidden
            EndContext();
            BeginContext(1833, 132, true);
            WriteLiteral("\";\r\n        ShowDialogFromAction(\'Добави\', uploadUrl);\r\n    }\r\n    function libSelectDocument(fileId, fileTitle) {\r\n        $.post(\'");
            EndContext();
            BeginContext(1966, 36, false);
#line 59 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
           Write(Url.Action("AppendUsedFile", "Ajax"));

#line default
#line hidden
            EndContext();
            BeginContext(2002, 29, true);
            WriteLiteral("\',\r\n            { sourceType:");
            EndContext();
            BeginContext(2033, 16, false);
#line 60 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                     Write(Model.SourceType);

#line default
#line hidden
            EndContext();
            BeginContext(2050, 11, true);
            WriteLiteral(", sourceId:");
            EndContext();
            BeginContext(2063, 14, false);
#line 60 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                                                   Write(Model.SourceID);

#line default
#line hidden
            EndContext();
            BeginContext(2078, 335, true);
            WriteLiteral(@",fileId:fileId},
            function (data) {
                LoadAttachedFiles();
            });
        HideModalDialog();
        HideDialog();
    }
    function removeFile(fileId, fileTitle) {
        if (!confirm('Потвърди премахването на файла: ' + fileTitle)) {
            return false;
        }
        $.post('");
            EndContext();
            BeginContext(2414, 36, false);
#line 71 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
           Write(Url.Action("RemoveUsedFile", "Ajax"));

#line default
#line hidden
            EndContext();
            BeginContext(2450, 29, true);
            WriteLiteral("\',\r\n            { sourceType:");
            EndContext();
            BeginContext(2481, 16, false);
#line 72 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                     Write(Model.SourceType);

#line default
#line hidden
            EndContext();
            BeginContext(2498, 11, true);
            WriteLiteral(", sourceId:");
            EndContext();
            BeginContext(2511, 14, false);
#line 72 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                                                   Write(Model.SourceID);

#line default
#line hidden
            EndContext();
            BeginContext(2526, 169, true);
            WriteLiteral(",fileId:fileId},\r\n            function (data) {\r\n                LoadAttachedFiles();\r\n\r\n            });\r\n    }\r\n    function moveFile(docId, moveUp) {\r\n        $.post(\'");
            EndContext();
            BeginContext(2696, 34, false);
#line 79 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
           Write(Url.Action("MoveUsedFile", "Ajax"));

#line default
#line hidden
            EndContext();
            BeginContext(2730, 29, true);
            WriteLiteral("\',\r\n            { sourceType:");
            EndContext();
            BeginContext(2761, 16, false);
#line 80 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                     Write(Model.SourceType);

#line default
#line hidden
            EndContext();
            BeginContext(2778, 11, true);
            WriteLiteral(", sourceId:");
            EndContext();
            BeginContext(2791, 14, false);
#line 80 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                                                   Write(Model.SourceID);

#line default
#line hidden
            EndContext();
            BeginContext(2806, 425, true);
            WriteLiteral(@", usedFileId: docId, moveUp: moveUp},
            function (data) {
                if (data == 'ok') {
                    LoadAttachedFiles();
                }
            });
    }
    function renameFile(fileId, fileTitle) {
        $('#fileNameEdit').val(fileTitle);
        $('#fileIdHidden').val(fileId);
        renameFileDialog.dialog(""open"");
    }
    function renameFileSubmit() {

        $.post('");
            EndContext();
            BeginContext(3232, 36, false);
#line 94 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
           Write(Url.Action("RenameUsedFile", "Ajax"));

#line default
#line hidden
            EndContext();
            BeginContext(3268, 469, true);
            WriteLiteral(@"',
            { fileId: $('#fileIdHidden').val(), fileTitle: $('#fileNameEdit').val()},
            function (data) {
                LoadAttachedFiles();
            });
    }
</script>
<script type=""text/x-handlebars-template"" id=""fileListTemplate"">
    <div class=""row"">
        {{#each items}}
        <div class=""col-lg-12 col-md-12 used-file-block"">
            <div class=""row"">
                <div class=""col-lg-10"">
                    <a href=""");
            EndContext();
            BeginContext(3738, 65, false);
#line 107 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                        Write(Html.Raw(Url.Action("DownloadFile", "FileCdn", new { area = ""})));

#line default
#line hidden
            EndContext();
            BeginContext(3803, 134, true);
            WriteLiteral("?id={{fileId}}\">\r\n                        <b>{{fileTitle}}</b>\r\n                        <br />\r\n                        {{fileName}}\r\n");
            EndContext();
#line 111 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                         if (addControls)
                        {

#line default
#line hidden
            BeginContext(4007, 107, true);
            WriteLiteral("                            <br />\r\n                            <span class=\"add-info\">{{addInfo}}</span>\r\n");
            EndContext();
#line 115 "C:\Projects\Strategy\newSingleSite\Domain\Areas\Admin\Views\Shared\UsedDocuments.cshtml"
                        }

#line default
#line hidden
            BeginContext(4141, 1168, true);
            WriteLiteral(@"                    </a>
                </div>
                <div class=""col-lg-2 used-file-remove-button"">
                    <a href=""#"" onclick=""renameFile('{{fileId}}','{{fileTitle}}');return false;"" class=""btn btn-xs btn-warning "" title=""Преименувай""><i class=""fa fa-edit""></i></a>
                    <a href=""#"" onclick=""moveFile('{{documentId}}',true,'{{fileTitle}}');return false;"" class=""btn btn-xs btn-primary "" title=""Премести нагоре""><i class=""fa fa-arrow-up""></i></a>
                    <a href=""#"" onclick=""moveFile('{{documentId}}',false,'{{fileTitle}}');return false;"" class=""btn btn-xs btn-primary "" title=""Премести надолу""><i class=""fa fa-arrow-down""></i></a>
                    <a href=""#"" onclick=""removeFile('{{fileId}}','{{fileTitle}}');return false;"" class=""btn btn-xs btn-danger "" title=""Премахни""><i class=""fa fa-remove""></i></a>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
    {{#if canAdd}}
    <div class=""used-file-add-button"">
    ");
            WriteLiteral("    <a href=\"#\" onclick=\"chooseFile();\" class=\"btn btn-sm btn-success\"><i class=\"fa fa-plus\"></i> Добави</a>\r\n    </div>\r\n    {{/if}}\r\n</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<FileCDN.Models.FileSelect> Html { get; private set; }
    }
}
#pragma warning restore 1591
